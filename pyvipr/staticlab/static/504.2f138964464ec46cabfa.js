(self.webpackChunkpyvipr=self.webpackChunkpyvipr||[]).push([[504],{504:e=>{e.exports=function e(n,o,t){function a(d,l){if(!o[d]){if(!n[d]){if(i)return i(d,!0);var s=new Error("Cannot find module '"+d+"'");throw s.code="MODULE_NOT_FOUND",s}var r=o[d]={exports:{}};n[d][0].call(r.exports,(function(e){return a(n[d][1][e]||e)}),r,r.exports,e,n,o,t)}return o[d].exports}for(var i=void 0,d=0;d<t.length;d++)a(t[d]);return a}({1:[function(e,n,o){var t={equalBoundingBoxes:function(e,n){return e.x1==n.x1&&e.x2==n.x2&&e.y1==n.y1&&e.y2==n.y2},getUnion:function(e,n){var o={x1:Math.min(e.x1,n.x1),x2:Math.max(e.x2,n.x2),y1:Math.min(e.y1,n.y1),y2:Math.max(e.y2,n.y2)};return o.w=o.x2-o.x1,o.h=o.y2-o.y1,o}};n.exports=t},{}],2:[function(e,n,o){var t=e("./debounce"),a=e("./debounce2");n.exports=function(n,o,i){var d,l=n;const s=100;var r;const c=function(){var e=o.scratch("_cyExpandCollapse");return e&&e.cueUtilities},p=function(e){var n=o.scratch("_cyExpandCollapse");null==n&&(n={}),n.cueUtilities=e,o.scratch("_cyExpandCollapse",n)};var u={init:function(){var n=document.createElement("canvas");n.classList.add("expand-collapse-canvas");var l=o.container(),c=n.getContext("2d");l.append(n),d=e("./elementUtilities")(o);var u=function(e){var n=e.getBoundingClientRect();return{top:n.top+document.documentElement.scrollTop,left:n.left+document.documentElement.scrollLeft}},g=t((function(){n.height=o.container().offsetHeight,n.width=o.container().offsetWidth,n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.zIndex=v().zIndex,setTimeout((function(){var e=u(n),t=u(l);n.style.top=-(e.top-t.top),n.style.left=-(e.left-t.left),o&&y()}),0)}),250);function f(){g()}f();var h={};function v(){return o.scratch("_cyExpandCollapse").options}function y(){var e=o.width(),n=o.height();c.clearRect(0,0,e,n),r=null}function x(e,n,o,t,a){var i=new Image(t,a);i.src=e,i.onload=()=>{c.drawImage(i,n,o,t,a)}}o.on("resize",h.eCyResize=function(){f()}),o.on("expandcollapse.clearvisualcue",(function(){r&&y()}));var E,m=null,C=null;o.on("mousedown",h.eMouseDown=function(e){m=e.renderedPosition||e.cyRenderedPosition}),o.on("mouseup",h.eMouseUp=function(e){C=e.renderedPosition||e.cyRenderedPosition}),o.on("remove","node",h.eRemove=function(e){e.target==r&&y()}),o.on("select unselect",h.eSelect=function(){r&&y();var e=o.nodes(":selected");if(1===e.length){var n=e[0];(n.isParent()||n.hasClass("cy-expand-collapse-collapsed-node"))&&function(e){var n=e.children(),t=e.data("collapsedChildren");if(null!=n&&null!=n&&n.length>0||t){var a,i=e.hasClass("cy-expand-collapse-collapsed-node"),l=v().expandCollapseCueSize,s=v().expandCollapseCueLineSize;if("top-left"===v().expandCollapseCuePosition){var p=o.zoom()<1?l/(2*o.zoom()):l/2,u=parseFloat(e.css("border-width"));a={x:e.position("x")-e.width()/2-parseFloat(e.css("padding-left"))+u+p+1,y:e.position("y")-e.height()/2-parseFloat(e.css("padding-top"))+u+p+1}}else{var g=v().expandCollapseCuePosition;a="function"==typeof g?g.call(this,e):g}var f=d.convertToRenderedPosition(a),h=((l=Math.max(l,l*o.zoom()))-(s=Math.max(s,s*o.zoom())))/2,y=f.x,E=f.y,m=y-l/2,C=E-l/2,b=l;if(i&&v().expandCueImage)x(v().expandCueImage,m,C,l,l);else if(!i&&v().collapseCueImage)x(v().collapseCueImage,m,C,l,l);else{var w=c.fillStyle,T=c.lineWidth,N=c.strokeStyle;c.fillStyle="black",c.strokeStyle="black",c.ellipse(y,E,l/2,l/2,0,0,2*Math.PI),c.fill(),c.beginPath(),c.strokeStyle="white",c.lineWidth=Math.max(2.6,2.6*o.zoom()),c.moveTo(m+h,C+l/2),c.lineTo(m+s+h,C+l/2),i&&(c.moveTo(m+l/2,C+h),c.lineTo(m+l/2,C+s+h)),c.closePath(),c.stroke(),c.strokeStyle=N,c.fillStyle=w,c.lineWidth=T}e._private.data.expandcollapseRenderedStartX=m,e._private.data.expandcollapseRenderedStartY=C,e._private.data.expandcollapseRenderedCueSize=b,r=e}}(n)}}),o.on("tap",h.eTap=function(e){var n=r;if(n){var t=n.data("expandcollapseRenderedStartX"),a=n.data("expandcollapseRenderedStartY"),d=n.data("expandcollapseRenderedCueSize"),l=t+d,s=a+d,c=e.renderedPosition||e.cyRenderedPosition,p=c.x,u=c.y,g=v(),f=(g.expandCollapseCueSensitivity-1)/2;Math.abs(m.x-C.x)<5&&Math.abs(m.y-C.y)<5&&p>=t-d*f&&p<=l+d*f&&u>=a-d*f&&u<=s+d*f&&(g.undoable&&!E&&(E=o.undoRedo({defaultActions:!1})),i.isCollapsible(n)?(y(),g.undoable?E.do("collapse",{nodes:n,options:g}):i.collapse(n,g)):i.isExpandable(n)&&(y(),g.undoable?E.do("expand",{nodes:n,options:g}):i.expand(n,g)),n.selectable()&&(n.unselectify(),o.scratch("_cyExpandCollapse").selectableChanged=!0))}}),o.on("afterUndo afterRedo",h.eUndoRedo=h.eSelect),o.on("position","node",h.ePosition=a(h.eSelect,s,y)),o.on("pan zoom",h.ePosition),h.hasEventFields=!0,p(h)},unbind:function(){var e=c();e.hasEventFields?(o.trigger("expandcollapse.clearvisualcue"),o.off("mousedown","node",e.eMouseDown).off("mouseup","node",e.eMouseUp).off("remove","node",e.eRemove).off("tap","node",e.eTap).off("add","node",e.eAdd).off("position","node",e.ePosition).off("pan zoom",e.ePosition).off("select unselect",e.eSelect).off("free","node",e.eFree).off("resize",e.eCyResize).off("afterUndo afterRedo",e.eUndoRedo)):console.log("events to unbind does not exist")},rebind:function(){var e=c();e.hasEventFields?o.on("mousedown","node",e.eMouseDown).on("mouseup","node",e.eMouseUp).on("remove","node",e.eRemove).on("tap","node",e.eTap).on("add","node",e.eAdd).on("position","node",e.ePosition).on("pan zoom",e.ePosition).on("select unselect",e.eSelect).on("free","node",e.eFree).on("resize",e.eCyResize).on("afterUndo afterRedo",e.eUndoRedo):console.log("events to rebind does not exist")}};if(u[l])return u[l].apply(o.container(),Array.prototype.slice.call(arguments,1));if("object"==typeof l||!l)return u.init.apply(o.container(),arguments);throw new Error("No such function `"+l+"` for cytoscape.js-expand-collapse")}},{"./debounce":3,"./debounce2":4,"./elementUtilities":5}],3:[function(e,n,o){var t,a,i=(t=Math.max,a=Date.now||function(){return(new Date).getTime()},function(e,n,o){var i,d,l,s,r,c,p,u,g,f=0,h=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(n=n<0?0:+n||0,!0===o){var y=!0;v=!1}else g=typeof(u=o),u&&("object"==g||"function"==g)&&(y=!!o.leading,h="maxWait"in o&&t(+o.maxWait||0,n),v="trailing"in o?!!o.trailing:v);function x(n,o){o&&clearTimeout(o),d=c=p=void 0,n&&(f=a(),l=e.apply(r,i),c||d||(i=r=void 0))}function E(){var e=n-(a()-s);e<=0||e>n?x(p,d):c=setTimeout(E,e)}function m(){x(v,c)}function C(){if(i=arguments,s=a(),r=this,p=v&&(c||!y),!1===h)var o=y&&!c;else{d||y||(f=s);var t=h-(s-f),u=t<=0||t>h;u?(d&&(d=clearTimeout(d)),f=s,l=e.apply(r,i)):d||(d=setTimeout(m,t))}return u&&c?c=clearTimeout(c):c||n===h||(c=setTimeout(E,n)),o&&(u=!0,l=e.apply(r,i)),!u||c||d||(i=r=void 0),l}return C.cancel=function(){c&&clearTimeout(c),d&&clearTimeout(d),f=0,d=c=p=void 0},C});n.exports=i},{}],4:[function(e,n,o){var t=function(e,n,o){let t,a=!0;return function(){const i=this,d=arguments,l=function(){t=null,e.apply(i,d),a=!0};clearTimeout(t),t=setTimeout(l,n),a&&(o.apply(i,d),a=!1)}};n.exports=t},{}],5:[function(e,n,o){n.exports=function(e){return{moveNodes:function(e,n,o){var t=o?n:this.getTopMostNodes(n),a=t.not(":parent");a.positions((function(n,o){return{x:a[o].position("x")+e.x,y:a[o].position("y")+e.y}}));for(var i=0;i<t.length;i++){var d=t[i].children();this.moveNodes(e,d,!0)}},getTopMostNodes:function(e){for(var n={},o=0;o<e.length;o++)n[e[o].id()]=!0;var t=e.filter((function(e,o){"number"==typeof e&&(e=o);for(var t=e.parent()[0];null!=t;){if(n[t.id()])return!1;t=t.parent()[0]}return!0}));return t},rearrange:function(n){if("function"==typeof n)n();else if(null!=n){var o=e.layout(n);o&&o.run&&o.run()}},convertToRenderedPosition:function(n){var o=e.pan(),t=e.zoom();return{x:n.x*t+o.x,y:n.y*t+o.y}}}}},{}],6:[function(e,n,o){var t=e("./boundingBoxUtilities");n.exports=function(n){var o=e("./elementUtilities")(n);return{animatedlyMovingNodeCount:0,expandNodeBaseFunction:function(e,t,a){if(e._private.data.collapsedChildren){var i={x:e._private.position.x-e._private.data["position-before-collapse"].x,y:e._private.position.y-e._private.data["position-before-collapse"].y};e.removeData("infoLabel"),e.removeClass("cy-expand-collapse-collapsed-node"),e.trigger("expandcollapse.beforeexpand");var d=e._private.data.collapsedChildren;d.restore();for(var l=n.scratch("_cyExpandCollapse").parentData,s=0;s<d.length;s++)delete l[d[s].id()];n.scratch("_cyExpandCollapse").parentData=l,this.repairEdges(e),e._private.data.collapsedChildren=null,o.moveNodes(i,e.children()),e.removeData("position-before-collapse"),e.trigger("position"),e.trigger("expandcollapse.afterexpand"),t&&this.endOperation(a,e)}},simpleCollapseGivenNodes:function(e){e.data("collapse",!0);for(var n=o.getTopMostNodes(e),t=0;t<n.length;t++){var a=n[t];this.collapseBottomUp(a)}return e},simpleExpandGivenNodes:function(e,n){e.data("expand",!0);for(var t=o.getTopMostNodes(e),a=0;a<t.length;a++){var i=t[a];this.expandTopDown(i,n)}return e},simpleExpandAllNodes:function(e,t){var a;void 0===e&&(e=n.nodes()),a=o.getTopMostNodes(e);for(var i=[],d=0;d<a.length;d++){var l=a[d];this.expandAllTopDown(l,i,t)}return i},endOperation:function(e,t){n.ready((function(){setTimeout((function(){o.rearrange(e),n.scratch("_cyExpandCollapse").selectableChanged&&(t.selectify(),n.scratch("_cyExpandCollapse").selectableChanged=!1)}),0)}))},expandAllNodes:function(e,n){var o=this.simpleExpandAllNodes(e,n.fisheye);return this.endOperation(n.layoutBy,e),o},expandAllTopDown:function(e,n,o){null!=e._private.data.collapsedChildren&&(n.push(e),this.expandNode(e,o));for(var t=e.children(),a=0;a<t.length;a++){var i=t[a];this.expandAllTopDown(i,n,o)}},expandGivenNodes:function(e,n){if(1===e.length){var o=e[0];null!=o._private.data.collapsedChildren&&this.expandNode(o,n.fisheye,!0,n.animate,n.layoutBy,n.animationDuration)}else this.simpleExpandGivenNodes(e,n.fisheye),this.endOperation(n.layoutBy,e);return e},collapseGivenNodes:function(e,o){return n.startBatch(),this.simpleCollapseGivenNodes(e),n.endBatch(),e.trigger("position"),this.endOperation(o.layoutBy,e),n.style().update(),e},collapseBottomUp:function(e){for(var n=e.children(),o=0;o<n.length;o++){var t=n[o];this.collapseBottomUp(t)}e.data("collapse")&&e.children().length>0&&(this.collapseNode(e),e.removeData("collapse"))},expandTopDown:function(e,n){e.data("expand")&&null!=e._private.data.collapsedChildren&&(this.expandNode(e,n),e.removeData("expand"));for(var o=e.children(),t=0;t<o.length;t++){var a=o[t];this.expandTopDown(a)}},convertToModelPosition:function(e){var o=n.pan(),t=n.zoom();return{x:(e.x-o.x)/t,y:(e.y-o.y)/t}},expandNode:function(e,o,a,i,d,l){var s=this,r=function(e,n,o,t,a,i){n&&(e._private.data["width-before-fisheye"]=e._private.data["size-before-collapse"].w,e._private.data["height-before-fisheye"]=e._private.data["size-before-collapse"].h,s.fishEyeViewExpandGivenNode(e,o,e,t,a,i)),o&&n&&t||s.expandNodeBaseFunction(e,o,a)};if(null!=e._private.data.collapsedChildren){this.storeWidthHeight(e);var c=!1;if(o&&a){var p=this.convertToModelPosition({x:0,y:0}),u=this.convertToModelPosition({x:n.width(),y:n.height()}),g={x1:p.x,x2:u.x,y1:p.y,y2:u.y},f={x1:e._private.position.x-e._private.data["size-before-collapse"].w/2-80,x2:e._private.position.x+e._private.data["size-before-collapse"].w/2+80,y1:e._private.position.y-e._private.data["size-before-collapse"].h/2-80,y2:e._private.position.y+e._private.data["size-before-collapse"].h/2+80},h=t.getUnion(f,g);if(!t.equalBoundingBoxes(h,g)){var v=n.getFitViewport(h,10);s=this,c=i,i?n.animate({pan:v.pan,zoom:v.zoom,complete:function(){r(e,o,a,i,d,l)}},{duration:l||1e3}):(n.zoom(v.zoom),n.pan(v.pan))}}return c||r(e,o,a,i,d,l),e}},collapseNode:function(e){if(null==e._private.data.collapsedChildren){e.data("position-before-collapse",{x:e.position().x,y:e.position().y}),e.data("size-before-collapse",{w:e.outerWidth(),h:e.outerHeight()});var n=e.children();return n.unselect(),n.connectedEdges().unselect(),e.trigger("expandcollapse.beforecollapse"),this.barrowEdgesOfcollapsedChildren(e),this.removeChildren(e,e),e.addClass("cy-expand-collapse-collapsed-node"),e.trigger("expandcollapse.aftercollapse"),e.position(e.data("position-before-collapse")),e}},storeWidthHeight:function(e){null!=e&&(e._private.data["x-before-fisheye"]=this.xPositionInParent(e),e._private.data["y-before-fisheye"]=this.yPositionInParent(e),e._private.data["width-before-fisheye"]=e.outerWidth(),e._private.data["height-before-fisheye"]=e.outerHeight(),null!=e.parent()[0]&&this.storeWidthHeight(e.parent()[0]))},fishEyeViewExpandGivenNode:function(e,n,o,t,a,i){var d=this.getSiblings(e),l=this.xPositionInParent(e),s=this.yPositionInParent(e),r=Math.abs((e._private.data["width-before-fisheye"]-e.outerWidth())/2),c=Math.abs((e._private.data["width-before-fisheye"]-e.outerWidth())/2),p=Math.abs((e._private.data["height-before-fisheye"]-e.outerHeight())/2),u=Math.abs((e._private.data["height-before-fisheye"]-e.outerHeight())/2),g=Math.abs(e._private.data["x-before-fisheye"]-l),f=Math.abs(e._private.data["y-before-fisheye"]-s);e._private.data["x-before-fisheye"]>l?(r+=g,c-=g):(r-=g,c+=g),e._private.data["y-before-fisheye"]>s?(p+=f,u-=f):(p-=f,u+=f);for(var h=[],v=[],y=0;y<d.length;y++)h.push(this.xPositionInParent(d[y])),v.push(this.yPositionInParent(d[y]));for(y=0;y<d.length;y++){var x,E,m=d[y],C=h[y],b=v[y],w=(b-s)/(C-l),T=0,N=0;x=l>C?r:c,E=s>b?p:u,isFinite(w)&&(T=Math.min(x,E/Math.abs(w))),0!==w&&(N=Math.min(E,x*Math.abs(w))),l>C&&(T*=-1),s>b&&(N*=-1),this.fishEyeViewMoveNode(m,T,N,o,n,t,a,i)}return 0==d.length&&e.same(o)&&this.expandNodeBaseFunction(o,n,a),null!=e.parent()[0]&&this.fishEyeViewExpandGivenNode(e.parent()[0],n,o,t,a,i),e},getSiblings:function(e){return null==e.parent()[0]?n.nodes(":visible").orphans().difference(e):e.siblings(":visible")},fishEyeViewMoveNode:function(e,o,t,a,i,d,l,s){var r=n.collection();e.isParent()&&(r=e.children(":visible"));var c=this;if(0==r.length){var p={x:e._private.position.x+o,y:e._private.position.y+t};i&&d?(this.animatedlyMovingNodeCount++,e.animate({position:p,complete:function(){c.animatedlyMovingNodeCount--,c.animatedlyMovingNodeCount>0||!a.hasClass("cy-expand-collapse-collapsed-node")||c.expandNodeBaseFunction(a,i,l)}},{duration:s||1e3})):e.position(p)}else for(var u=0;u<r.length;u++)this.fishEyeViewMoveNode(r[u],o,t,a,i,d,l,s)},xPositionInParent:function(e){var n=e.parent()[0];return null!=n?e.relativePosition("x")+n.width()/2:e.position("x")},yPositionInParent:function(e){var n=e.parent()[0];return null!=n?e.relativePosition("y")+n.height()/2:e.position("y")},removeChildren:function(e,o){for(var t=e.children(),a=0;a<t.length;a++){var i=t[a];this.removeChildren(i,o);var d=n.scratch("_cyExpandCollapse").parentData;d[i.id()]=i.parent(),n.scratch("_cyExpandCollapse").parentData=d;var l=i.remove();null==o._private.data.collapsedChildren?o._private.data.collapsedChildren=l:o._private.data.collapsedChildren=o._private.data.collapsedChildren.union(l)}},isMetaEdge:function(e){return e.hasClass("cy-expand-collapse-meta-edge")},barrowEdgesOfcollapsedChildren:function(e){var o=e.descendants(),t=o.edgesWith(n.nodes().not(o.union(e))),a={};o.each((function(e,n){"number"==typeof e&&(e=n),a[e.id()]=!0}));for(var i=0;i<t.length;i++){var d=t[i],l=d.source(),s=d.target();if(!this.isMetaEdge(d)){var r={source:l,target:s};d.addClass("cy-expand-collapse-meta-edge"),d.data("originalEnds",r)}d.move({target:a[s.id()]?e.id():s.id(),source:a[l.id()]?e.id():l.id()})}},findNewEnd:function(e){for(var o=e,t=n.scratch("_cyExpandCollapse").parentData,a=t[o.id()];!o.inside();)o=a,a=t[a.id()];return o},repairEdges:function(e){for(var n=e.connectedEdges(".cy-expand-collapse-meta-edge"),o=0;o<n.length;o++){var t=n[o],a=t.data("originalEnds"),i=t.data("source");t.data("target"),(t=i===e.id()?t.move({source:this.findNewEnd(a.source).id()}):t.move({target:this.findNewEnd(a.target).id()})).data("source")===a.source.id()&&t.data("target")===a.target.id()&&(t.removeClass("cy-expand-collapse-meta-edge"),t.removeData("originalEnds"))}},isOuterNode:function(e,n){for(var o=e;null!=o;){if(o==n)return!1;o=o.parent()[0]}return!0},getCollapsedChildrenRecursively:function(e,n){var o,t=e.data("collapsedChildren")||[];for(o=0;o<t.length;o++)t[o].data("collapsedChildren")&&(n=n.union(this.getCollapsedChildrenRecursively(t[o],n))),n=n.union(t[o]);return n},collapseGivenEdges:function(e,o){e.unselect();var t=e.connectedNodes(),a={};if(o.groupEdgesOfSameTypeOnCollapse)e.forEach((function(e){var t="unknown";if(void 0!==o.edgeTypeInfo&&(t=o.edgeTypeInfo instanceof Function?o.edgeTypeInfo.call(e):e.data()[o.edgeTypeInfo]),a.hasOwnProperty(t))a[t].edges=a[t].edges.add(e),"unidirection"!=a[t].directionType||a[t].source==e.source().id()&&a[t].target==e.target().id()||(a[t].directionType="bidirection");else{var i=n.collection();i=i.add(e),a[t]={edges:i,directionType:"unidirection",source:e.source().id(),target:e.target().id()}}}));else{a.unknown={edges:e,directionType:"unidirection",source:e[0].source().id(),target:e[0].target().id()};for(var i=0;i<e.length;i++)if("unidirection"==a.unknown.directionType&&(a.unknown.source!=e[i].source().id()||a.unknown.target!=e[i].target().id())){a.unknown.directionType="bidirection";break}}var d={edges:n.collection(),oldEdges:n.collection()},l=[];for(const i in a)if(!(a[i].edges.length<2)){e.trigger("expandcollapse.beforecollapseedge"),d.oldEdges=d.oldEdges.add(a[i].edges);var s={group:"edges",data:{}};s.data.source=a[i].source,s.data.target=a[i].target;var r=t[0].id(),c=r;t[1]&&(c=t[1].id()),s.data.id="collapsedEdge_"+r+"_"+c+"_"+i+"_"+Math.floor(Math.random()*Date.now()),s.data.collapsedEdges=n.collection(),a[i].edges.forEach((function(e){s.data.collapsedEdges=s.data.collapsedEdges.add(e)})),s.data.collapsedEdges=this.check4nestedCollapse(s.data.collapsedEdges,o);var p="edgeType";void 0!==o.edgeTypeInfo&&(p=o.edgeTypeInfo instanceof Function?edgeTypeField:o.edgeTypeInfo),s.data[p]=i,s.data.directionType=a[i].directionType,s.classes="cy-expand-collapse-collapsed-edge",l.push(s),n.remove(a[i].edges),e.trigger("expandcollapse.aftercollapseedge")}return d.edges=n.add(l),d},check4nestedCollapse:function(e,o){if(o.allowNestedEdgeCollapse)return e;let t=n.collection();for(let n=0;n<e.length;n++){let o=e[n],a=o.data("collapsedEdges");t=a&&a.length>0?t.add(a):t.add(o)}return t},expandEdge:function(e){e.unselect();var o={edges:n.collection(),oldEdges:n.collection()},t=e.data("collapsedEdges");return void 0!==t&&t.length>0&&(e.trigger("expandcollapse.beforeexpandedge"),o.oldEdges=o.oldEdges.add(e),n.remove(e),o.edges=n.add(t),e.trigger("expandcollapse.afterexpandedge")),o},isValidEdgesForCollapse:function(e){var n=this.getEdgesDistinctEndPoints(e);return 2==n.length&&n},getEdgesDistinctEndPoints:function(e){var n=[];return e.forEach(function(e){this.containsElement(n,e.source())||n.push(e.source()),this.containsElement(n,e.target())||n.push(e.target())}.bind(this)),n},containsElement:function(e,n){for(var o=!1,t=0;t<e.length;t++)if(e[t].id()==n.id()){o=!0;break}return o}}}},{"./boundingBoxUtilities":1,"./elementUtilities":5}],7:[function(e,n,o){!function(){"use strict";var o=function(n){if(n){var o=e("./undoRedoUtilities"),t=e("./cueUtilities"),a=null;n("core","expandCollapse",(function(n){var r=this,c=l(r,"options")||{layoutBy:null,fisheye:!0,animate:!0,animationDuration:1e3,ready:function(){},undoable:!0,cueEnabled:!0,expandCollapseCuePosition:"top-left",expandCollapseCueSize:12,expandCollapseCueLineSize:8,expandCueImage:void 0,collapseCueImage:void 0,expandCollapseCueSensitivity:1,edgeTypeInfo:"edgeType",groupEdgesOfSameTypeOnCollapse:!1,allowNestedEdgeCollapse:!0,zIndex:999};if("get"!==n){c=i(c,n);var p=function(e,n){var o={};function r(n){var t=l(e,"options");n.cueEnabled&&!t.cueEnabled?o.enableCue():!n.cueEnabled&&t.cueEnabled&&o.disableCue()}function c(e){let n=[];for(let o=0;o<e.length;o++){const t=e[o].source().id(),a=e[o].target().id(),i={};i[t]=!0,i[a]=!0,n.push(i)}for(let e=0;e<n.length;e++)for(let o=e+1;o<n.length;o++){const t=Object.keys(n[e]),a=Object.keys(n[o]),i=new Set(t.concat(a));if(i.size!=t.length||i.size!=a.length)return!1}return!0}return o.setOptions=function(n){r(n),s(e,"options",n)},o.extendOptions=function(n){var o=i(l(e,"options"),n);r(o),s(e,"options",o)},o.setOption=function(n,o){var t={};t[n]=o;var a=i(l(e,"options"),t);r(a),s(e,"options",a)},o.collapse=function(o,t){var a=this.collapsibleNodes(o),s=i(l(e,"options"),t);return d(s),n.collapseGivenNodes(a,s)},o.collapseRecursively=function(n,o){var t=this.collapsibleNodes(n),a=i(l(e,"options"),o);return d(a),this.collapse(t.union(t.descendants()),a)},o.expand=function(o,t){var a=this.expandableNodes(o),s=i(l(e,"options"),t);return d(s),n.expandGivenNodes(a,s)},o.expandRecursively=function(o,t){var a=this.expandableNodes(o),s=i(l(e,"options"),t);return d(s),n.expandAllNodes(a,s)},o.collapseAll=function(n){var o=i(l(e,"options"),n);return d(o),this.collapseRecursively(this.collapsibleNodes(),o)},o.expandAll=function(n){var o=i(l(e,"options"),n);return d(o),this.expandRecursively(this.expandableNodes(),o)},o.isExpandable=function(e){return e.hasClass("cy-expand-collapse-collapsed-node")},o.isCollapsible=function(e){return!this.isExpandable(e)&&e.isParent()},o.collapsibleNodes=function(n){var o=this;return(n||e.nodes()).filter((function(e,n){return"number"==typeof e&&(e=n),o.isCollapsible(e)}))},o.expandableNodes=function(n){var o=this;return(n||e.nodes()).filter((function(e,n){return"number"==typeof e&&(e=n),o.isExpandable(e)}))},o.getCollapsedChildren=function(e){return e.data("collapsedChildren")},o.getCollapsedChildrenRecursively=function(o){var t=e.collection();return n.getCollapsedChildrenRecursively(o,t)},o.getAllCollapsedChildrenRecursively=function(){var n,o=e.collection(),t=e.nodes(".cy-expand-collapse-collapsed-node");for(n=0;n<t.length;n++)o=o.union(this.getCollapsedChildrenRecursively(t[n]));return o},o.clearVisualCue=function(n){e.trigger("expandcollapse.clearvisualcue")},o.disableCue=function(){var n=l(e,"options");n.cueEnabled&&(t("unbind",e,o),n.cueEnabled=!1)},o.enableCue=function(){var n=l(e,"options");n.cueEnabled||(t("rebind",e,o),n.cueEnabled=!0)},o.getParent=function(n){return void 0===e.getElementById(n)[0]?l(e,"parentData")[n]:e.getElementById(n).parent()},o.collapseEdges=function(o,t){var a={edges:e.collection(),oldEdges:e.collection()};if(o.length<2)return a;if(!c(o))return a;var d=i(l(e,"options"),t);return n.collapseGivenEdges(o,d)},o.expandEdges=function(o){var t={edges:e.collection(),oldEdges:e.collection()};return void 0===o||o.forEach((function(e){var o=n.expandEdge(e);t.edges=t.edges.add(o.edges),t.oldEdges=t.oldEdges.add(o.oldEdges)})),t},o.collapseEdgesBetweenNodes=function(o,t){var a=i(l(e,"options"),t);function d(e){var n=[];return e.slice(0,e.length-1).forEach((function(o,t){e.slice(t+1,e.length).forEach((function(e){n.push([o,e])}))})),n}var s=d(o);s.push(...o.map((e=>[e,e])));var r={edges:e.collection(),oldEdges:e.collection()};return s.forEach(function(e){const o=e[1].id();var t=e[0].connectedEdges('[source = "'+o+'"],[target = "'+o+'"]');if(e[0].id()===o&&(t=e[0].connectedEdges('[source = "'+o+'"][target = "'+o+'"]')),t.length>=2){var i=n.collapseGivenEdges(t,a);r.oldEdges=r.oldEdges.add(i.oldEdges),r.edges=r.edges.add(i.edges)}}.bind(this)),r},o.expandEdgesBetweenNodes=function(n){var o=e.collection();function t(e){var n=[];return e.slice(0,e.length-1).forEach((function(o,t){e.slice(t+1,e.length).forEach((function(e){n.push([o,e])}))})),n}var a=t(n);return a.push(...n.map((e=>[e,e]))),a.forEach(function(e){const n=e[1].id();var t=e[0].connectedEdges('.cy-expand-collapse-collapsed-edge[source = "'+n+'"],[target = "'+n+'"]');e[0].id()===n&&(t=e[0].connectedEdges('[source = "'+n+'"][target = "'+n+'"]')),o=o.union(t)}.bind(this)),this.expandEdges(o)},o.collapseAllEdges=function(n){return this.collapseEdgesBetweenNodes(e.edges().connectedNodes(),n)},o.expandAllEdges=function(){var n=e.edges(".cy-expand-collapse-collapsed-edge"),o={edges:e.collection(),oldEdges:e.collection()},t=this.expandEdges(n);return o.oldEdges=o.oldEdges.add(t.oldEdges),o.edges=o.edges.add(t.edges),o},o.loadJson=function(e){a.loadJson(e)},o.saveJson=function(e,n){a.saveJson(e,n)},o}(r,e("./expandCollapseUtilities")(r));a=e("./saveLoadUtilities")(r,p),s(r,"api",p),o(r,p),t(c,r,p),c.cueEnabled||t("unbind",r,p),c.ready&&c.ready(),s(r,"options",c),s(r,"parentData",{})}return l(r,"api")}))}function i(e,n){var o={};for(var t in e)o[t]=e[t];for(var t in n)o.hasOwnProperty(t)&&(o[t]=n[t]);return o}function d(e){var n="function"==typeof e.animate?e.animate.call():e.animate,o="function"==typeof e.fisheye?e.fisheye.call():e.fisheye;e.animate=n,e.fisheye=o}function l(e,n){void 0===e.scratch("_cyExpandCollapse")&&e.scratch("_cyExpandCollapse",{});var o=e.scratch("_cyExpandCollapse");return void 0===n?o:o[n]}function s(e,n,o){l(e)[n]=o}};void 0!==n&&n.exports&&(n.exports=o),"undefined"!=typeof cytoscape&&o(cytoscape)}()},{"./cueUtilities":2,"./expandCollapseUtilities":6,"./saveLoadUtilities":8,"./undoRedoUtilities":9}],8:[function(e,n,o){n.exports=function(e,n){function o(n,a,i,d){n.sort((e=>"edges"===e.group?1:-1));let l=e.collection();for(let s=0;s<n.length;s++){const r=n[s],c=r.data;c.parent&&(d[c.id]=c.parent);const p={x:r.position.x,y:r.position.y},u=e.add(r);if(u.isNode()&&a.merge(u),c.originalEnds){let e=a.$id(c.originalEnds.source.data.id);c.originalEnds.source.data.parent&&(d[c.originalEnds.source.data.id]=c.originalEnds.source.data.parent);let n=a.$id(c.originalEnds.target.data.id);c.originalEnds.target.data.parent&&(d[c.originalEnds.target.data.id]=c.originalEnds.target.data.parent),u.data("originalEnds",{source:e,target:n})}c.collapsedChildren?(i.merge(u),o(c.collapsedChildren,a,i,d),t(u)):c.collapsedEdges&&(u.data("collapsedEdges",o(c.collapsedEdges,a,i,d)),e.remove(u.data("collapsedEdges"))),u.position(p),l.merge(u)}return l}function t(e){e.data("collapsedChildren",null),e.removeClass("cy-expand-collapse-collapsed-node"),e.data("position-before-collapse",null),e.data("size-before-collapse",null),e.data("expandcollapseRenderedStartX",null),e.data("expandcollapseRenderedStartY",null),e.data("expandcollapseRenderedCueSize",null)}function a(e){let n=[];for(let o=0;o<e.length;o++){const t=e[o];let d=null;if(t.collapsedChildren||t.collapsedEdges?t.collapsedChildren?(t.collapsedChildren=a(i(t.collapsedChildren)),d=t.cy.json(),d.data.collapsedChildren=t.collapsedChildren):t.collapsedEdges&&(t.collapsedEdges=a(i(t.collapsedEdges)),d=t.cy.json(),d.data.collapsedEdges=t.collapsedEdges):d=t.cy.json(),t.originalEnds){const e=t.originalEnds.source.json(),n=t.originalEnds.target.json();e.data.collapsedChildren&&(e.data.collapsedChildren=a(i(e.data.collapsedChildren))),n.data.collapsedChildren&&(n.data.collapsedChildren=a(i(n.data.collapsedChildren))),d.data.originalEnds={source:e,target:n}}n.push(d)}return n}function i(e){let n=[];for(let o=0;o<e.length;o++)n.push({cy:e[o],collapsedEdges:e[o].data("collapsedEdges"),collapsedChildren:e[o].data("collapsedChildren"),originalEnds:e[o].data("originalEnds")});return n}return{loadJson:function(a){const i=JSON.parse(a),d={},l=e.collection(),s=e.collection(),r={};for(const n of i.nodes){d[n.data.id]={x:n.position.x,y:n.position.y},n.data.parent&&(r[n.data.id]=n.data.parent);const a=e.add(n);l.merge(a),a.data("collapsedChildren")&&(o(a.data("collapsedChildren"),l,s,r),s.merge(a),t(a))}for(const n of i.edges){const t=e.add(n);if(t.data("collapsedEdges")&&(t.data("collapsedEdges",o(n.data.collapsedEdges,l,s,r)),e.remove(t.data("collapsedEdges"))),t.data("originalEnds")){const e=n.data.originalEnds.source.data.id,o=n.data.originalEnds.target.data.id;n.data.originalEnds={source:l.filter("#"+e),target:l.filter("#"+o)}}}for(let e in r){const n=l.$id(e);1===n.length&&n.move({parent:r[e]})}n.collapse(s,{layoutBy:null,fisheye:!1,animate:!1});for(const n of i.nodes)e.$id(n.data.id).isChildless()&&e.$id(n.data.id).position(d[n.data.id]);e.fit()},saveJson:function(n,o){n||(n=e.$());const t=i(n.nodes()),d=i(n.edges());if(d.length+t.length<1)return;const l={nodes:[],edges:[]};for(const e of d){if(e.collapsedEdges&&(e.collapsedEdges=a(i(e.collapsedEdges))),e.originalEnds){const n=e.originalEnds.source.json(),o=e.originalEnds.target.json();n.data.collapsedChildren&&(n.data.collapsedChildren=a(i(n.data.collapsedChildren))),o.data.collapsedChildren&&(o.data.collapsedChildren=a(i(o.data.collapsedChildren))),e.originalEnds={source:n,target:o}}const n=e.cy.json();n.data.collapsedEdges=e.collapsedEdges,n.data.originalEnds=e.originalEnds,l.edges.push(n)}for(const e of t){e.collapsedChildren&&(e.collapsedChildren=a(i(e.collapsedChildren)));const n=e.cy.json();n.data.collapsedChildren=e.collapsedChildren,l.nodes.push(n)}o||(o="expand-collapse-output.json"),function(e,n){const o=new Blob([e],{type:"text/plain"}),t=document.createElement("a");t.download=n,t.href=window.URL.createObjectURL(o),t.dataset.downloadurl=["text/plain",t.download,t.href].join(":"),t.click()}(JSON.stringify(l),o)}}}},{}],9:[function(e,n,o){n.exports=function(e,n){if(null!=e.undoRedo){for(var o=e.undoRedo({},!0),t={layoutBy:null,animate:!1,fisheye:!1},a=["collapse","collapseRecursively","collapseAll","expand","expandRecursively","expandAll"],i=0;i<a.length;i++)2==i?o.action("collapseAll",l("collapseAll"),l("expandRecursively")):5==i?o.action("expandAll",l("expandAll"),l("collapseRecursively")):o.action(a[i],l(a[i]),l(a[(i+3)%6]));o.action("collapseEdges",s,p),o.action("expandEdges",p,s),o.action("collapseEdgesBetweenNodes",r,u),o.action("expandEdgesBetweenNodes",u,r),o.action("collapseAllEdges",c,g),o.action("expandAllEdges",g,c)}function d(){for(var n={},o=e.nodes(),t=0;t<o.length;t++){var a=o[t];n[a.id()]={x:a.position("x"),y:a.position("y")}}return n}function l(o){return function(a){var i,l,s,r={},c="string"==typeof(i=a.nodes)?e.$(i):i;return a.firstTime?(r.oldData=d(),r.nodes=o.indexOf("All")>0?n[o](a.options):n[o](c,a.options)):(r.oldData=d(),r.nodes=o.indexOf("All")>0?n[o](t):n[o](e.collection(c),t),l=a.oldData,s={},e.nodes().not(":parent").positions((function(e,n){"number"==typeof e&&(e=n),s[e.id()]={x:e.position("x"),y:e.position("y")};var o=l[e.id()];return{x:o.x,y:o.y}}))),r}}function s(o){var t=o.options,a=o.edges,i={};if(i.options=t,o.firstTime){var d=n.collapseEdges(a,t);i.edges=d.edges,i.oldEdges=d.oldEdges,i.firstTime=!1}else i.oldEdges=a,i.edges=o.oldEdges,o.edges.length>0&&o.oldEdges.length>0&&(e.remove(o.edges),e.add(o.oldEdges));return i}function r(o){var t=o.options,a={};if(a.options=t,o.firstTime){var i=n.collapseEdgesBetweenNodes(o.nodes,t);a.edges=i.edges,a.oldEdges=i.oldEdges,a.firstTime=!1}else a.edges=o.oldEdges,a.oldEdges=o.edges,o.edges.length>0&&o.oldEdges.length>0&&(e.remove(o.edges),e.add(o.oldEdges));return a}function c(o){var t=o.options,a={};if(a.options=t,o.firstTime){var i=n.collapseAllEdges(t);a.edges=i.edges,a.oldEdges=i.oldEdges,a.firstTime=!1}else a.edges=o.oldEdges,a.oldEdges=o.edges,o.edges.length>0&&o.oldEdges.length>0&&(e.remove(o.edges),e.add(o.oldEdges));return a}function p(o){var t=o.options,a={};if(a.options=t,o.firstTime){var i=n.expandEdges(o.edges);a.edges=i.edges,a.oldEdges=i.oldEdges,a.firstTime=!1}else a.oldEdges=o.edges,a.edges=o.oldEdges,o.edges.length>0&&o.oldEdges.length>0&&(e.remove(o.edges),e.add(o.oldEdges));return a}function u(o){var t=o.options,a={};if(a.options=t,o.firstTime){var i=n.expandEdgesBetweenNodes(o.nodes,t);a.edges=i.edges,a.oldEdges=i.oldEdges,a.firstTime=!1}else a.edges=o.oldEdges,a.oldEdges=o.edges,o.edges.length>0&&o.oldEdges.length>0&&(e.remove(o.edges),e.add(o.oldEdges));return a}function g(o){var t=o.options,a={};if(a.options=t,o.firstTime){var i=n.expandAllEdges(t);a.edges=i.edges,a.oldEdges=i.oldEdges,a.firstTime=!1}else a.edges=o.oldEdges,a.oldEdges=o.edges,o.edges.length>0&&o.oldEdges.length>0&&(e.remove(o.edges),e.add(o.oldEdges));return a}}},{}]},{},[7])(7)}}]);